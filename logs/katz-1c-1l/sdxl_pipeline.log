Using EulerDiscreteScheduler
In unet_2d_condition.py
Using pipeline pipeline_controlnet_sd_xl_suyi.py
Number of GPUs: 8
Available GPU 0: _CudaDeviceProperties(name='NVIDIA H800', major=9, minor=0, total_memory=81007MB, multi_processor_count=132)
Available GPU 1: _CudaDeviceProperties(name='NVIDIA H800', major=9, minor=0, total_memory=81007MB, multi_processor_count=132)
Available GPU 2: _CudaDeviceProperties(name='NVIDIA H800', major=9, minor=0, total_memory=81007MB, multi_processor_count=132)
Available GPU 3: _CudaDeviceProperties(name='NVIDIA H800', major=9, minor=0, total_memory=81007MB, multi_processor_count=132)
Available GPU 4: _CudaDeviceProperties(name='NVIDIA H800', major=9, minor=0, total_memory=81007MB, multi_processor_count=132)
Available GPU 5: _CudaDeviceProperties(name='NVIDIA H800', major=9, minor=0, total_memory=81007MB, multi_processor_count=132)
Available GPU 6: _CudaDeviceProperties(name='NVIDIA H800', major=9, minor=0, total_memory=81007MB, multi_processor_count=132)
Available GPU 7: _CudaDeviceProperties(name='NVIDIA H800', major=9, minor=0, total_memory=81007MB, multi_processor_count=132)
Args: Namespace(num_images=1, serve_mode='without', world_size=4, gpu_id=0, rank=0, controlnet_parallel=True, controlnet_parallel_rank=[2], num_controlnets=1, lora_mode='sync', load_lora_mode='async', max_lora_num=1, latent_parallel=True, verbose=False)
World size: 4, rank: 0
Enable cuda graph: True
load_state_dict: safetensors.torch.load_file(/home/lyangbk/.cache/huggingface/hub/models--diffusers--controlnet-depth-sdxl-1.0/snapshots/17bb97973f29801224cd66f192c5ffacf82648b4/diffusion_pytorch_model.fp16.safetensors)
load_state_dict: safetensors.torch.load_file(/home/lyangbk/.cache/huggingface/hub/models--madebyollin--sdxl-vae-fp16-fix/snapshots/207b116dae70ace3637169f1ddd2434b91b3a8cd/diffusion_pytorch_model.safetensors)
Using customized pipeline_stable_diffusion_xl

Loading pipeline components...:   0%|          | 0/7 [00:00<?, ?it/s]
Loading pipeline components...:  43%|████▎     | 3/7 [00:00<00:00, 23.42it/s]
Loading pipeline components...:  86%|████████▌ | 6/7 [00:12<00:02,  2.52s/it]
Loading pipeline components...: 100%|██████████| 7/7 [00:12<00:00,  1.84s/it]
Enable cuda graph: True
load_state_dict: safetensors.torch.load_file(/home/lyangbk/.cache/huggingface/hub/models--stabilityai--stable-diffusion-xl-base-1.0/snapshots/462165984030d82259a11f4367a4eed129e94a7b/unet/diffusion_pytorch_model.safetensors)
[Init] start_loading_flag_np: [0 0]
default_unet_state_dict length 1680

  0%|          | 0/50 [00:00<?, ?it/s]
  2%|▏         | 1/50 [00:27<22:46, 27.89s/it]
 10%|█         | 5/50 [00:28<03:08,  4.18s/it]
 18%|█▊        | 9/50 [00:28<01:18,  1.90s/it]
 26%|██▌       | 13/50 [00:28<00:40,  1.08s/it]
 34%|███▍      | 17/50 [00:28<00:22,  1.48it/s]
 42%|████▏     | 21/50 [00:28<00:12,  2.23it/s]
 50%|█████     | 25/50 [00:28<00:07,  3.25it/s]
 58%|█████▊    | 29/50 [00:28<00:04,  4.58it/s]
 66%|██████▌   | 33/50 [00:28<00:02,  6.28it/s]
 74%|███████▍  | 37/50 [00:29<00:01,  8.36it/s]
 82%|████████▏ | 41/50 [00:29<00:00, 10.79it/s]
 90%|█████████ | 45/50 [00:29<00:00, 13.49it/s]
 98%|█████████▊| 49/50 [00:29<00:00, 16.30it/s]
100%|██████████| 50/50 [00:29<00:00,  1.70it/s]
Fuse LoRA to unet
Patch latency: 0.10
Patched ['TheLastBen/Papercut_SDXL'] at step 0
Total denoising time: 29.46
Total controlnet time: 0.00
Total unet time: 29.14
Load LoRA latency: 0.00
End2End inference latency: 35.70
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  6%|▌         | 3/50 [00:00<00:01, 28.52it/s]
 14%|█▍        | 7/50 [00:00<00:01, 30.23it/s]
 22%|██▏       | 11/50 [00:00<00:01, 30.70it/s]
 30%|███       | 15/50 [00:00<00:01, 30.91it/s]
 38%|███▊      | 19/50 [00:00<00:01, 22.61it/s]
 46%|████▌     | 23/50 [00:00<00:01, 24.99it/s]
 54%|█████▍    | 27/50 [00:01<00:00, 26.75it/s]
 62%|██████▏   | 31/50 [00:01<00:00, 28.04it/s]
 70%|███████   | 35/50 [00:01<00:00, 28.97it/s]
 78%|███████▊  | 39/50 [00:01<00:00, 29.62it/s]
 86%|████████▌ | 43/50 [00:01<00:00, 30.10it/s]
 94%|█████████▍| 47/50 [00:01<00:00, 30.43it/s]
100%|██████████| 50/50 [00:01<00:00, 28.72it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 16
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.59
Load LoRA latency: 0.00
End2End inference latency: 1.88
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.03it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.13it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.15it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.17it/s]
 40%|████      | 20/50 [00:00<00:01, 22.79it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.09it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.81it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.06it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.97it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.62it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.09it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.43it/s]
100%|██████████| 50/50 [00:01<00:00, 28.83it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 16
Total denoising time: 1.73
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.04it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.13it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.16it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.18it/s]
 40%|████      | 20/50 [00:00<00:01, 22.84it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.13it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.84it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.10it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 29.00it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.65it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.11it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.44it/s]
100%|██████████| 50/50 [00:01<00:00, 28.86it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 17
Total denoising time: 1.73
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.03it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.13it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.15it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.17it/s]
 40%|████      | 20/50 [00:00<00:00, 31.17it/s]
 48%|████▊     | 24/50 [00:00<00:01, 23.14it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 25.28it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 26.91it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.11it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.00it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 29.64it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.10it/s]
100%|██████████| 50/50 [00:01<00:00, 28.82it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 20
Total denoising time: 1.73
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.00it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.10it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.14it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.16it/s]
 40%|████      | 20/50 [00:00<00:01, 22.78it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.08it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.81it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.08it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.98it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.63it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.11it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.43it/s]
100%|██████████| 50/50 [00:01<00:00, 28.83it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 17
Total denoising time: 1.73
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.01it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.10it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.14it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.17it/s]
 40%|████      | 20/50 [00:00<00:01, 22.77it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.09it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.81it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.06it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.97it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.62it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.08it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.41it/s]
100%|██████████| 50/50 [00:01<00:00, 28.82it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 17
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.04it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.14it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.15it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.18it/s]
 40%|████      | 20/50 [00:00<00:01, 22.96it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.22it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.91it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.14it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 29.04it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.67it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.12it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.46it/s]
100%|██████████| 50/50 [00:01<00:00, 28.89it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 16
Total denoising time: 1.73
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.02it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.07it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.14it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.15it/s]
 40%|████      | 20/50 [00:00<00:01, 22.92it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.20it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.87it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.11it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 29.01it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.65it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.10it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.43it/s]
100%|██████████| 50/50 [00:01<00:00, 28.87it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 16
Total denoising time: 1.73
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.01it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.12it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.16it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.12it/s]
 40%|████      | 20/50 [00:00<00:01, 22.72it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.02it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.75it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.03it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.95it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.61it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.09it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.42it/s]
100%|██████████| 50/50 [00:01<00:00, 28.80it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 19
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.06it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.14it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.18it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.18it/s]
 40%|████      | 20/50 [00:00<00:01, 22.80it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.09it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.81it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.07it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.97it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.62it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.08it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.41it/s]
100%|██████████| 50/50 [00:01<00:00, 28.83it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 18
Total denoising time: 1.73
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.03it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.12it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.13it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.15it/s]
 40%|████      | 20/50 [00:00<00:01, 22.79it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.09it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.81it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.07it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.95it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.61it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.08it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.41it/s]
100%|██████████| 50/50 [00:01<00:00, 28.82it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 17
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 30.98it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.12it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.14it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.16it/s]
 40%|████      | 20/50 [00:00<00:01, 22.91it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.20it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.89it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.13it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 29.01it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.65it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.10it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.42it/s]
100%|██████████| 50/50 [00:01<00:00, 28.86it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 18
Total denoising time: 1.73
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 30.98it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.10it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.14it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.15it/s]
 40%|████      | 20/50 [00:00<00:01, 22.81it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.11it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.82it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.06it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.98it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.63it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.09it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.42it/s]
100%|██████████| 50/50 [00:01<00:00, 28.83it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 16
Total denoising time: 1.73
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.02it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.13it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.15it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.18it/s]
 40%|████      | 20/50 [00:00<00:01, 22.78it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.08it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.80it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.06it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.97it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.62it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.08it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.41it/s]
100%|██████████| 50/50 [00:01<00:00, 28.82it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 19
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 30.98it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.10it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.14it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.16it/s]
 40%|████      | 20/50 [00:00<00:01, 22.78it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.07it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.80it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.06it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.97it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.62it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.08it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.41it/s]
100%|██████████| 50/50 [00:01<00:00, 28.82it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 17
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.01it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.14it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.15it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.16it/s]
 40%|████      | 20/50 [00:00<00:01, 22.76it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.06it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.79it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.06it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.97it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.62it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.08it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.41it/s]
100%|██████████| 50/50 [00:01<00:00, 28.82it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 18
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.88
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.00it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.12it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.16it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.17it/s]
 40%|████      | 20/50 [00:00<00:01, 22.80it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.09it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.81it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.06it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.98it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.60it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.08it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.41it/s]
100%|██████████| 50/50 [00:01<00:00, 28.82it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 17
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.04it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.12it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.14it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.12it/s]
 40%|████      | 20/50 [00:00<00:01, 22.74it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.06it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.78it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.05it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.96it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.61it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.08it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.41it/s]
100%|██████████| 50/50 [00:01<00:00, 28.81it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 17
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 30.99it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.10it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.15it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.16it/s]
 40%|████      | 20/50 [00:00<00:01, 22.75it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.05it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.77it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.03it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.95it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.61it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.08it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.42it/s]
100%|██████████| 50/50 [00:01<00:00, 28.81it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 16
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.88
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.03it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.11it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.14it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.17it/s]
 40%|████      | 20/50 [00:00<00:01, 19.78it/s]
 48%|████▊     | 24/50 [00:00<00:01, 22.59it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 24.81it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 26.53it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 27.82it/s]
 80%|████████  | 40/50 [00:01<00:00, 28.78it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 29.48it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 29.97it/s]
100%|██████████| 50/50 [00:01<00:00, 27.63it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 16
Total denoising time: 1.81
Total controlnet time: 0.00
Total unet time: 1.66
Load LoRA latency: 0.00
End2End inference latency: 1.95
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.01it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.11it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.14it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.16it/s]
 40%|████      | 20/50 [00:00<00:01, 22.76it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.06it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.79it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.05it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.95it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.60it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.07it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.39it/s]
100%|██████████| 50/50 [00:01<00:00, 28.80it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 17
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 30.94it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.10it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.14it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.16it/s]
 40%|████      | 20/50 [00:00<00:01, 22.78it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.08it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.80it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.04it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.96it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.61it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.07it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.40it/s]
100%|██████████| 50/50 [00:01<00:00, 28.81it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 17
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.04it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.13it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.17it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.17it/s]
 40%|████      | 20/50 [00:00<00:00, 31.18it/s]
 48%|████▊     | 24/50 [00:01<00:01, 14.99it/s]
 56%|█████▌    | 28/50 [00:01<00:01, 18.05it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 20.85it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 23.26it/s]
 80%|████████  | 40/50 [00:01<00:00, 25.24it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 26.80it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 28.00it/s]
100%|██████████| 50/50 [00:02<00:00, 24.86it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 20
Total denoising time: 2.01
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 2.15
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.00it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.11it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.15it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.16it/s]
 40%|████      | 20/50 [00:00<00:01, 22.77it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.08it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.79it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.05it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.98it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.62it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.08it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.41it/s]
100%|██████████| 50/50 [00:01<00:00, 28.82it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 16
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 30.97it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.11it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.14it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.16it/s]
 40%|████      | 20/50 [00:00<00:01, 22.95it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.21it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.89it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.13it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 29.01it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.64it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.09it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.42it/s]
100%|██████████| 50/50 [00:01<00:00, 28.87it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 18
Total denoising time: 1.73
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.00it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.10it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.14it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.15it/s]
 40%|████      | 20/50 [00:00<00:01, 22.71it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.01it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.74it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.01it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.94it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.60it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.07it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.40it/s]
100%|██████████| 50/50 [00:01<00:00, 28.79it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 17
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.00it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.11it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.14it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.17it/s]
 40%|████      | 20/50 [00:00<00:01, 22.90it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.18it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.87it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.10it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 29.00it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.64it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.10it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.43it/s]
100%|██████████| 50/50 [00:01<00:00, 28.86it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 17
Total denoising time: 1.73
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.04it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.13it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.15it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.16it/s]
 40%|████      | 20/50 [00:00<00:01, 22.73it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.04it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.76it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.04it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 28.95it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.61it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.08it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.41it/s]
100%|██████████| 50/50 [00:01<00:00, 28.80it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 19
Total denoising time: 1.74
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 30.98it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.10it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.13it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.16it/s]
 40%|████      | 20/50 [00:00<00:01, 19.86it/s]
 48%|████▊     | 24/50 [00:00<00:01, 22.66it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 24.88it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 26.59it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 27.88it/s]
 80%|████████  | 40/50 [00:01<00:00, 28.81it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 29.51it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 29.99it/s]
100%|██████████| 50/50 [00:01<00:00, 27.67it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 17
Total denoising time: 1.81
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.94
==============================

  0%|          | 0/50 [00:00<?, ?it/s]
  8%|▊         | 4/50 [00:00<00:01, 31.04it/s]
 16%|█▌        | 8/50 [00:00<00:01, 31.12it/s]
 24%|██▍       | 12/50 [00:00<00:01, 31.15it/s]
 32%|███▏      | 16/50 [00:00<00:01, 31.16it/s]
 40%|████      | 20/50 [00:00<00:01, 22.94it/s]
 48%|████▊     | 24/50 [00:00<00:01, 25.21it/s]
 56%|█████▌    | 28/50 [00:01<00:00, 26.89it/s]
 64%|██████▍   | 32/50 [00:01<00:00, 28.13it/s]
 72%|███████▏  | 36/50 [00:01<00:00, 29.03it/s]
 80%|████████  | 40/50 [00:01<00:00, 29.66it/s]
 88%|████████▊ | 44/50 [00:01<00:00, 30.11it/s]
 96%|█████████▌| 48/50 [00:01<00:00, 30.43it/s]
100%|██████████| 50/50 [00:01<00:00, 28.87it/s]
Fuse LoRA to unet
Patch latency: 0.09
Patched ['TheLastBen/Papercut_SDXL'] at step 16
Total denoising time: 1.73
Total controlnet time: 0.00
Total unet time: 1.58
Load LoRA latency: 0.00
End2End inference latency: 1.87
==============================
End2End inference latency: 70.66
Number of prompts: 30
End2End Throughput: 2.36
Shut down all LoRA loaders [100   0]
/home/lyangbk/.conda/envs/sd-serving/lib/python3.10/multiprocessing/resource_tracker.py:224: UserWarning: resource_tracker: There appear to be 1445 leaked shared_memory objects to clean up at shutdown
  warnings.warn('resource_tracker: There appear to be %d '
